<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¤Ù„Ù Ø§Ù„ÙƒÙŠÙˆ Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; text-align: center; }
        input[type="file"] { width: 100%; padding: 10px; margin: 20px 0; border: 1px solid #ddd; border-radius: 5px; }
        button { background-color: #007bff; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 16px; font-weight: bold; }
        button:hover { background-color: #0056b3; }
        #status { margin-top: 15px; font-size: 14px; color: #555; line-height: 1.6; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸš€ Ø±ÙØ¹ Ù…Ù„Ù Ø³Ø±ÙŠØ¹</h2>
    <p style="font-size: 13px; color: #666;">Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ ÙƒÙŠÙˆ Ø§Ø± Ø¯Ø§Ø¦Ù…</p>
    <input type="file" id="fileInput">
    <button onclick="uploadToGithub()">Ø±ÙØ¹ Ø§Ù„Ø¢Ù†</button>
    <div id="status"></div>
</div>

<script>
// Ø¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨ÙŠÙ† Ø¹Ù„Ø§Ù…ØªÙŠ Ø§Ù„ØªÙ†ØµÙŠØµ Ø¨Ø§Ù„Ø£Ø³ÙÙ„
const GITHUB_TOKEN = "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"; 

async function uploadToGithub() {
    const fileInput = document.getElementById('fileInput');
    const status = document.getElementById('status');

    if (!fileInput.files[0]) {
        alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹ Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }

    const file = fileInput.files[0];
    const reader = new FileReader();
    status.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";

    reader.onload = async function() {
        const content = reader.result.split(',')[1]; 
        const fileName = `${Date.now()}-${file.name.replace(/\s+/g, '_')}`;
        const url = `https://api.github.com/repos/elgoharymd/my-qr-vault/contents/uploads/${fileName}`;

        try {
            const response = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${GITHUB_TOKEN}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: `Upload ${fileName}`,
                    content: content
                })
            });

            if (response.ok) {
                const qrLink = `https://elgoharymd.github.io/my-qr-vault/qrcodes/${fileName}.png`;
                status.innerHTML = `âœ… ØªÙ… Ø§Ù„Ø±ÙØ¹!<br><br>Ø§Ù†ØªØ¸Ø± 60 Ø«Ø§Ù†ÙŠØ© Ø«Ù… Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù€ QR ÙÙŠ Ù…Ø¬Ù„Ø¯ qrcodes Ø¨Ø§Ø³Ù…:<br><b>${fileName}.png</b>`;
            } else {
                const err = await response.json();
                status.innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±ÙØ¹: " + err.message;
            }
        } catch (error) {
            status.innerText = "ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub";
        }
    };
    reader.readAsDataURL(file);
}
</script>
</body>
</html>
